import{a as _}from"/build/_shared/chunk-K3LLJEF6.js";import{a as D}from"/build/_shared/chunk-CZPLFTPK.js";import"/build/_shared/chunk-US3DNLVM.js";import{a as b}from"/build/_shared/chunk-JE3YDR3Z.js";import{a as d}from"/build/_shared/chunk-VGTHEEQS.js";import{a as w,b as u}from"/build/_shared/chunk-BVJBT3X3.js";import{d as m}from"/build/_shared/chunk-T36URGAI.js";var a=m(w(),1);var t=m(u(),1),g=D().default,k=({projectId:n,userId:o,compId:r})=>{let[s,N]=(0,a.useState)([]),[v,i]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let A=async()=>{i(!0),console.log("Data fetching from Action Items =====>>>>>.........");try{let e=new FormData;e.append("op","get_project_reference_detail"),e.append("project_id",n.toString()??"0"),e.append("need_more_data","0"),e.append("for_module_key",""),e.append("version","web"),e.append("from","panel"),e.append("iframe_call","0"),e.append("tz","+5:30"),e.append("tzid","Asia/Calcutta"),e.append("curr_time",new Date().toISOString()),e.append("force_login","0"),e.append("global_project",""),e.append("user_id",o.toString()??"0"),e.append("company_id",r.toString()??"0");let f=await _.post(`https://api-cfdev.contractorforeman.net/service.php?opp=get_project_reference_detail&c=${r?Number(r):0}&u=${o?Number(o):0}&p=manage_projects`,e);console.log("Data fetching Successfull from Action Items  =====>>>>>",f?.data),N(f?.data?.data?.modules||[]),i(!1)}catch(e){console.log("Error fetching data from Action Items =====>>>>>",e),console.error("Error fetching data:",e)}finally{i(!1)}},x=setTimeout(()=>{n&&A()},300);return()=>clearTimeout(x)},[n,o,r]);let y={chart:{id:"chart1",type:"bar",stacked:!0,toolbar:{show:!1}},plotOptions:{bar:{horizontal:!0,dataLabels:{total:{enabled:!0,offsetX:0,style:{fontSize:"13px",fontWeight:900}}}}},xaxis:{categories:["OPEN","DUE","CLOSED"],tickPlacement:"on"},colors:["#684CC7","#e01f35","#282691"],legend:{show:!0,position:"top"}},c=s?.open_incomplete_item?.opnIncoInvoice[0]||{},l=s?.open_incomplete_item?.opnIncoBills[0]||{},p=s?.open_incomplete_item?.opnIncoPurchaseOrder[0]||{},S=[{name:"Invoices",data:[Number(c?.total_open)||0,Number(c?.total_due)||0,Number(c?.total_close)||0]},{name:"Bills",data:[Number(l?.total_open)||0,Number(l?.bill_count)||0,Number(l?.total_close)||0]},{name:"Purchase Orders",data:[Number(p?.total_open)||0,Number(p?.bill_count)||0,Number(p?.total_close)||0]}];return s?.length<=0?(console.log("<<<<<==== Data not Available ====>>>>>"),(0,t.jsx)("div",{children:"Loading Charts"})):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b,{icon:"fa-solid fa-box-circle-check",label:"Action Items"}),(0,t.jsx)("div",{className:"summary_details_block_body",children:g?(0,t.jsx)(t.Fragment,{children:v?(0,t.jsx)(h,{}):(0,t.jsx)(a.Suspense,{children:(0,t.jsx)(g,{type:"bar",height:250,options:y,series:S})})}):(0,t.jsx)(h,{})})]})},z=k,h=()=>(0,t.jsx)("div",{className:"space-y-4",children:[...Array(4)].map((n,o)=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(d,{className:"w-8 h-4"}),(0,t.jsx)(d,{className:`h-14 ${o===1?"w-3/4":o===2?"w-full":"w-1/2"}`})]},o))});export{z as default};
