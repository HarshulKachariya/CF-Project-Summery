import{a as T}from"/build/_shared/chunk-526LYIMD.js";import{f as A,g as a}from"/build/_shared/chunk-5YUAE2GI.js";import{d as g}from"/build/_shared/chunk-6FNV2DGP.js";import{b as C}from"/build/_shared/chunk-LWA5GBZT.js";import{a as R}from"/build/_shared/chunk-RKKVXJBZ.js";import{d as f}from"/build/_shared/chunk-T36URGAI.js";var m=f(R(),1);var i=f(C(),1),U=({data:b,isLoading:q})=>{let[x,E]=(0,m.useState)({budgeted:[],actual:[]}),[N,S]=(0,m.useState)();(0,m.useEffect)(()=>{import("/build/_shared/react-apexcharts.min-DIYHRUFY.js").then(e=>S(()=>e.default))},[]);let v=b?.billing_vs_actual||{},_=b?.all_item_total||{},k=Number(_?.total?.commited_total)||0,w=Number(_?.total?.actual_total)||0,F=Number(_?.labor?.actual_total)||0,L=(Number(v?.amount_invoiced)||0)/100,y=Number(_?.total?.estimated_total)||0,h=(Number(v?.original_contract_amount)||0)/100,D=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e);(0,m.useEffect)(()=>{let p=0,t=0,d=0,u=0,o=0,l=0,s=h,r=A(b?.billed_amount)/100,n=b?.project_cost;Array("material","equipment","labor","sub_contractor","other_item","total","expense","unassigned")?.forEach(function(c,z){c=="total"&&n?.[c]&&(p=n?.[c]?.commited_total,t=n?.[c]?.estimated_total,u=n?.[c]?.estimated_total,d=n?.[c]?.actual_total),c=="labor"&&n?.[c]&&(o=n?.[c]?.commited_total,l=n?.[c]?.estimated_total)}),E({budgeted:[a((isNaN(p*100/t)?0:p*100/t).toFixed(0)),a((isNaN(d*100/u)?0:d*100/u).toFixed(0)),a((isNaN(o*100/l)?0:o*100/l).toFixed(0)),a((isNaN(r*100/s)?0:r*100/s).toFixed(0))],actual:[100,100,100,100],actual_total:isNaN(p)?0:a(p),estimated_total:isNaN(t)?0:a(t),actual_actual_total:isNaN(d)?0:a(d),actual_estimated_total:isNaN(u)?0:a(u),labor_total:isNaN(o)?0:a(o),labor_estimated_total:isNaN(l)?0:a(l),billed_amount:isNaN(r)?0:a(r),original_contract_amount:isNaN(s)?0:a(s)})},[b]);let B={chart:{id:"chart1",toolbar:{show:!1}},grid:{show:!1},plotOptions:{bar:{horizontal:!1,columnWidth:"30%",dataLabels:{position:"top"}}},xaxis:{categories:["Committed","Actual","Labor","Invoiced"]},yaxis:{labels:{formatter:function(e){return`${e.toFixed(0)}%`}},min:0,max:1e3},dataLabels:{enabled:!1},stroke:{colors:["transparent"],width:5},tooltip:{shared:!0,intersect:!1,y:{formatter:function(e){return D(Number(e))}},custom:function({series:e,seriesIndex:p,dataPointIndex:t,w:d}){let u=d.globals.labels[t],o=e[0][t],l=e[1][t],s="",r="";return t===0?(s="Committed Cost",r="Estimated Cost",o=k.toFixed(0),l=y.toFixed(0)):t===1?(s="Actual Cost",r="Estimated Cost",o=w.toFixed(0),l=y.toFixed(0)):t===2?(s="Actual Labor Cost",r="Budgeted Labor",o=F.toFixed(0),l=F.toFixed(0)):t===3&&(s="Contract Billings",r="Contract Amount",o=L.toFixed(0),l=h.toFixed(0)),"                            <div class='tooltip-box-block'>                                <div class='tooltip_inner_block'>                                    <div class='bg-[#ECEFF1] border-b border-solid border-[#ddd] text-13 font-medium leading-4 p-1.5 mb-1'>"+u+"</div>                                    <div class='tooltip-box-body'>                                        <div class='tooltip-group-div !py-1 gap-1'>                                            <div class='flex items-center text-xs text-primary-900'>                                                <small class='w-2.5 h-2.5 bg-[#63759A] rounded-full mr-0.5 inline-block'></small>                                                "+s+": </div>                                                <CFTypography title='small' class='text-xs text-primary-900'> "+o+"</CFTypography >                                        </div >                                        <div class='tooltip-group-div !py-1 gap-1'>                                            <div class='flex items-center text-xs text-primary-900'>                                            <small class='w-2.5 h-2.5 bg-[#F9BE3F] rounded-full mr-0.5 inline-block'></small>                                            "+r+": </div >                                            <CFTypography title='small' class='text-xs text-primary-900'> "+l+"</CFTypography>                                        </div>                                    </div>                                </div>                            </div>"}},colors:["#7d89a9","#f5c85e"],legend:{show:!1,position:"top"}},O=[{name:"Budgeted",data:x?.budgeted??[]},{name:"Actual",data:x?.actual}];return b?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(T,{icon:"fa-solid fa-sack-dollar",label:"Summary Percentages"}),(0,i.jsx)("div",{className:"summary_details_block_body",children:N?(0,i.jsx)(m.Suspense,{children:(0,i.jsx)(N,{type:"bar",options:B,series:O,height:250})}):(0,i.jsx)(g,{})})]}):(console.log("<<<<<==== Data not Available ====>>>>>"),(0,i.jsx)(g,{}))},G=U;export{G as default};
