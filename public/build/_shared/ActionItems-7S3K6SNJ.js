import{a as g}from"/build/_shared/chunk-K3LLJEF6.js";import{a as x}from"/build/_shared/chunk-526LYIMD.js";import{b as y,c as D,d as P}from"/build/_shared/chunk-5YUAE2GI.js";import{d as l}from"/build/_shared/chunk-6FNV2DGP.js";import{b as h}from"/build/_shared/chunk-LWA5GBZT.js";import{a as F}from"/build/_shared/chunk-RKKVXJBZ.js";import{d as I}from"/build/_shared/chunk-T36URGAI.js";var n=I(F(),1);var t=I(h(),1),k=({projectId:i,userId:p,compId:c})=>{let[z,A]=(0,n.useState)({}),[e,v]=(0,n.useState)([]),[C,r]=(0,n.useState)(!0),[f,O]=(0,n.useState)();(0,n.useEffect)(()=>{import("/build/_shared/react-apexcharts.min-DIYHRUFY.js").then(a=>O(()=>a.default))},[]),(0,n.useEffect)(()=>{let a=async()=>{r(!0),console.log("Data fetching from Action Items =====>>>>>.........");try{let o=new FormData;o.append("op","get_project_reference_detail"),o.append("project_id",i.toString()??"0"),o.append("need_more_data","0"),o.append("for_module_key",""),o.append("version","web"),o.append("from","panel"),o.append("iframe_call","0"),o.append("tz",D),o.append("tzid","Asia/Calcutta"),o.append("curr_time",y),o.append("force_login","0"),o.append("global_project",""),o.append("user_id",p.toString()??"0"),o.append("company_id",c.toString()??"0");let N=await g.post(`${P}/service.php?opp=get_project_reference_detail&c=${c?Number(c):0}&u=${p?Number(p):0}&p=manage_projects`,o);console.log("Data fetching Successfull from Action Items  =====>>>>>",N?.data),v(N?.data?.data?.modules||[]),r(!1)}catch(o){console.log("Error fetching data from Action Items =====>>>>>",o),console.error("Error fetching data:",o)}finally{r(!1)}},T=setTimeout(()=>{i&&a()},300);return()=>clearTimeout(T)},[i,p,c]),(0,n.useEffect)(()=>{A(a=>({...a??{},close:[Number(e?.open_incomplete_item?.opnIncoBills?.total_close),Number(e?.open_incomplete_item?.opnIncoInvoice?.total_close),Number(e?.open_incomplete_item?.opnIncoPurchaseOrder?.total_close),Number(e?.open_incomplete_item?.opnIncoPunchlist?.total_close),Number(e?.open_incomplete_item?.opnIncoRFI?.total_close),Number(e?.open_incomplete_item?.opnIncoToDo?.total_close)],open:[Number(e?.open_incomplete_item?.opnIncoBills?.total_open),Number(e?.open_incomplete_item?.opnIncoInvoice?.total_open),Number(e?.open_incomplete_item?.opnIncoPurchaseOrder?.total_open),Number(e?.open_incomplete_item?.opnIncoPunchlist?.total_open),Number(e?.open_incomplete_item?.opnIncoRFI?.total_open),Number(e?.open_incomplete_item?.opnIncoToDo?.total_open)],due:[Number(e?.open_incomplete_item?.opnIncoBills?.total_due),Number(e?.open_incomplete_item?.opnIncoInvoice?.total_due),Number(e?.open_incomplete_item?.opnIncoPurchaseOrder?.total_due),Number(e?.open_incomplete_item?.opnIncoPunchlist?.total_due),Number(e?.open_incomplete_item?.opnIncoRFI?.total_due),Number(e?.open_incomplete_item?.opnIncoToDo?.total_due)]}))},[e]);let S={chart:{id:"chart1",type:"bar",stacked:!0,toolbar:{show:!1}},plotOptions:{bar:{horizontal:!0,dataLabels:{total:{enabled:!0,offsetX:0,style:{fontSize:"13px",fontWeight:900}}}}},xaxis:{categories:["OPEN","DUE","CLOSED"],tickPlacement:"on"},colors:["#684CC7","#e01f35","#282691"],legend:{show:!0,position:"top"}},m=e?.open_incomplete_item?.opnIncoInvoice[0]||{},s=e?.open_incomplete_item?.opnIncoBills[0]||{},_=e?.open_incomplete_item?.opnIncoPurchaseOrder[0]||{},u=e?.open_incomplete_item?.opnIncoPunchlist[0]||{},d=e?.open_incomplete_item?.opnIncoRFI[0]||{},b=e?.open_incomplete_item?.opnIncoToDo[0]||{},R=[{name:"Invoices",data:[Number(m?.total_open)||0,Number(m?.total_due)||0,Number(m?.total_close)||0]},{name:"Bills",data:[Number(s?.total_open)||0,Number(s?.bill_count)||0,Number(s?.total_close)||0]},{name:"Purchase Orders",data:[Number(_?.total_open)||0,Number(_?.bill_count)||0,Number(_?.total_close)||0]},{name:"opnIncoPunchlist",data:[Number(u?.total_open)||0,Number(u?.total_due)||0,Number(u?.total_close)||0]},{name:"opnIncoRFI",data:[Number(d?.total_open)||0,Number(d?.bill_count)||0,Number(d?.total_close)||0]},{name:"opnIncoToDo",data:[Number(b?.total_open)||0,Number(b?.bill_count)||0,Number(b?.total_close)||0]}];return e?.length<=0?(console.log("<<<<<==== Data not Available ====>>>>>"),(0,t.jsx)(l,{})):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x,{icon:"fa-solid fa-box-circle-check",label:"Action Items"}),(0,t.jsx)("div",{className:"summary_details_block_body",children:f?(0,t.jsx)(t.Fragment,{children:C?(0,t.jsx)(l,{}):(0,t.jsx)(n.Suspense,{children:(0,t.jsx)(f,{type:"bar",height:250,options:S,series:R})})}):(0,t.jsx)(l,{})})]})},W=k;export{W as default};
