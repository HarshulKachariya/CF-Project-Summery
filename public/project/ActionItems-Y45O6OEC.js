import{a as j}from"./chunk-KGURQTUR.js";import{a as K}from"./chunk-VCGPNACE.js";import{a as _,c as C,d as P,h as T,i as D,j as I,o as k,p as E}from"./chunk-JLT4YN3A.js";var q=_((fe,A)=>{"use strict";var Q="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";A.exports=Q});var W=_((me,z)=>{"use strict";var Z=q();function F(){}function B(){}B.resetWarningCache=F;z.exports=function(){function t(n,a,i,p,l,c){if(c!==Z){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}t.isRequired=t;function e(){return t}var o={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:B,resetWarningCache:F};return o.PropTypes=o,o}});var U=_((be,L)=>{L.exports=W()();var he,de});var V=_(S=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0});var ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},te=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o,n=arguments[e];for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},oe=function(){function t(e,o){for(var n=0;n<o.length;n++){var a=o[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),ne=K(),M=R(ne),$=P(),b=R($),re=U(),u=R(re);function R(t){return t&&t.__esModule?t:{default:t}}function ae(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function ie(t,e){var o,n={};for(o in t)0<=e.indexOf(o)||Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}function se(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ce(t,e){if(t)return!e||typeof e!="object"&&typeof e!="function"?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function le(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}window.ApexCharts=M.default;var J=function(){function t(e){se(this,t);var o=ce(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return b.default.createRef?o.chartRef=b.default.createRef():o.setRef=function(n){return o.chartRef=n},o.chart=null,o}return le(t,$.Component),oe(t,[{key:"render",value:function(){var e=ie(this.props,[]);return b.default.createElement("div",te({ref:b.default.createRef?this.chartRef:this.setRef},e))}},{key:"componentDidMount",value:function(){var e=b.default.createRef?this.chartRef.current:this.chartRef;this.chart=new M.default(e,this.getConfig()),this.chart.render()}},{key:"getConfig",value:function(){var i=this.props,e=i.type,o=i.height,n=i.width,a=i.series,i=i.options;return this.extend(i,{chart:{type:e,height:o,width:n},series:a})}},{key:"isObject",value:function(e){return e&&(e===void 0?"undefined":ee(e))==="object"&&!Array.isArray(e)&&e!=null}},{key:"extend",value:function(e,o){var n=this,a=(typeof Object.assign!="function"&&(Object.assign=function(i){if(i==null)throw new TypeError("Cannot convert undefined or null to object");for(var p=Object(i),l=1;l<arguments.length;l++){var c=arguments[l];if(c!=null)for(var h in c)c.hasOwnProperty(h)&&(p[h]=c[h])}return p}),Object.assign({},e));return this.isObject(e)&&this.isObject(o)&&Object.keys(o).forEach(function(i){n.isObject(o[i])&&i in e?a[i]=n.extend(e[i],o[i]):Object.assign(a,ae({},i,o[i]))}),a}},{key:"componentDidUpdate",value:function(e){if(!this.chart)return null;var a=this.props,l=a.options,o=a.series,n=a.height,a=a.width,i=JSON.stringify(e.options),p=JSON.stringify(e.series),l=JSON.stringify(l),c=JSON.stringify(o);i===l&&p===c&&n===e.height&&a===e.width||(p!==c&&i===l&&n===e.height&&a===e.width?this.chart.updateSeries(o):this.chart.updateOptions(this.getConfig()))}},{key:"componentWillUnmount",value:function(){this.chart&&typeof this.chart.destroy=="function"&&this.chart.destroy()}}]),t}();(S.default=J).propTypes={type:u.default.string.isRequired,width:u.default.oneOfType([u.default.string,u.default.number]),height:u.default.oneOfType([u.default.string,u.default.number]),series:u.default.array.isRequired,options:u.default.object.isRequired},J.defaultProps={type:"line",width:"100%",height:"auto"}});var f=C(P(),1);var r=C(k(),1),X=V().default,pe=({projectId:t,userId:e,compId:o})=>{let[n,a]=(0,f.useState)([]),[i,p]=(0,f.useState)(!0);(0,f.useEffect)(()=>{let d=async()=>{p(!0),console.log("Data fetching from Action Items =====>>>>>.........");try{let s=new FormData;s.append("op","get_project_reference_detail"),s.append("project_id",t?.toString()??"0"),s.append("need_more_data","0"),s.append("for_module_key",""),s.append("version","web"),s.append("from","panel"),s.append("iframe_call","0"),s.append("tz",D),s.append("tzid","Asia/Calcutta"),s.append("curr_time",T),s.append("force_login","0"),s.append("global_project",""),s.append("user_id",e?.toString()??"0"),s.append("company_id",o?.toString()??"0");let y=await j.post(`${I}/service.php?opp=get_project_reference_detail&c=${o?Number(o):0}&u=${e?Number(e):0}&p=manage_projects`,s);console.log("Data fetching Successfull from Action Items  =====>>>>>",y?.data),a(y?.data?.data?.modules||[]),p(!1)}catch(s){console.log("Error fetching data from Action Items =====>>>>>",s),console.error("Error fetching data:",s)}finally{p(!1)}},m=setTimeout(()=>{t&&d()},300);return()=>clearTimeout(m)},[t,e,o]);let l={chart:{id:"chart1",type:"bar",stacked:!0,toolbar:{show:!1}},plotOptions:{bar:{horizontal:!0,dataLabels:{total:{enabled:!0,offsetX:7,style:{fontSize:"13px",fontWeight:900}}}}},xaxis:{categories:["OPEN","DUE","CLOSED"],tickPlacement:"on"},fill:{opacity:1},legend:{show:!0,position:"top",horizontalAlign:"center",offsetX:40,onItemClick:{toggleDataSeries:!1}},states:{normal:{filter:{type:"none"}},hover:{filter:{type:"none"}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"none",value:.35}}}},c=n?.open_incomplete_item?.opnIncoInvoice[0]||{},h=n?.open_incomplete_item?.opnIncoBills||{},g=n?.open_incomplete_item?.opnIncoPurchaseOrder[0]||{},v=n?.open_incomplete_item?.opnIncoPunchlist[0]||{},O=n?.open_incomplete_item?.opnIncoRFI[0]||{},N=n?.open_incomplete_item?.opnIncoToDo[0]||{},x=n?.open_incomplete_item?.opnIncoCompliance[0]||{},[H,Y]=(0,f.useState)([0,0,0]);(0,f.useEffect)(()=>{let d=n?.open_incomplete_item?.opnIncoBills||[],m=[0,0,0];d.forEach(({bill_status:s,bill_count:y})=>{let w=parseInt(y,10);switch(s.toLowerCase()){case"open":m[0]+=w;break;case"due":m[1]+=w;break;case"closed":m[2]+=w;break}}),Y(m)},[n]);let G=[{name:"Bills",data:H,color:"#D53E4F"},{name:"Compliance",data:[Number(x?.total_open)||0,Number(x?.total_due)||0,Number(x?.total_close)||0],color:"#303A52"},{name:"Invoices",data:[Number(c?.total_open)||0,Number(c?.total_due)||0,Number(c?.total_close)||0],color:"#684CC7"},{name:"PO's",data:[Number(g?.total_open)||0,Number(g?.bill_count)||0,Number(g?.total_close)||0],color:"#3836A1"},{name:"Punchlists",data:[Number(v?.total_open)||0,Number(v?.total_due)||0,Number(v?.total_close)||0],color:"#F46D43"},{name:"RFI's",data:[Number(O?.total_open)||0,Number(O?.bill_count)||0,Number(O?.total_close)||0],color:"#2494A4"},{name:"To Do's",data:[Number(N?.total_open)||0,Number(N?.total_due)||0,Number(N?.total_close)||0],color:"#CC9F5D"}].filter(d=>d.data.some(m=>m>0));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(E,{icon:"fa-solid fa-box-circle-check",label:"Action Items"}),(0,r.jsx)("div",{className:"summary_details_block_body position-relative",children:n?.length<=0?(0,r.jsxs)("div",{className:"chart-bar-loader chart-horizontal",style:{height:238},children:[(0,r.jsxs)("ul",{className:"chart-bar-xaxis",children:[(0,r.jsx)("li",{className:"xaxis-1",children:(0,r.jsx)("span",{})}),(0,r.jsx)("li",{className:"xaxis-2",children:(0,r.jsx)("span",{})}),(0,r.jsx)("li",{className:"xaxis-3",children:(0,r.jsx)("span",{})}),(0,r.jsx)("li",{className:"xaxis-4",children:(0,r.jsx)("span",{})}),(0,r.jsx)("li",{className:"xaxis-5",children:(0,r.jsx)("span",{})}),(0,r.jsx)("li",{className:"xaxis-6",children:(0,r.jsx)("span",{})})]}),(0,r.jsxs)("div",{className:"chart-bar-shimmer",children:[(0,r.jsx)("div",{className:"bar-shimmer bar-1",children:(0,r.jsx)("span",{})}),(0,r.jsx)("div",{className:"bar-shimmer bar-2",children:(0,r.jsx)("span",{})}),(0,r.jsx)("div",{className:"bar-shimmer bar-3",children:(0,r.jsx)("span",{})})]})]}):(0,r.jsxs)(r.Fragment,{children:[" ",X?(0,r.jsx)(f.Suspense,{children:(0,r.jsx)(X,{type:"bar",height:238,options:l,series:G})}):(0,r.jsx)(r.Fragment,{})]})})]})},we=pe;export{we as default};
